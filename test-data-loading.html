<!DOCTYPE html>
<html>
<head>
    <title>Data Loading Test</title>
</head>
<body>
    <h1>Data Loading Test</h1>
    <div id="results"></div>
    
    <script>
        // Test the same data loading logic as the main app
        function testDataLoading() {
            const results = document.getElementById('results');
            let output = '';
            
            try {
                // Try to load data from embedded script first
                const embeddedElement = document.getElementById('EMBEDDED_DATA');
                output += '<h2>Embedded Element Test:</h2>';
                
                if (embeddedElement) {
                    output += '<p>‚úÖ EMBEDDED_DATA element found</p>';
                    
                    if (embeddedElement.textContent.trim()) {
                        output += '<p>‚úÖ Element has content</p>';
                        
                        try {
                            const embeddedData = JSON.parse(embeddedElement.textContent);
                            output += '<p>‚úÖ JSON parsing successful</p>';
                            
                            if (Array.isArray(embeddedData)) {
                                output += `<p>üìä Data is array with ${embeddedData.length} items</p>`;
                            } else if (embeddedData && embeddedData.products && Array.isArray(embeddedData.products)) {
                                output += `<p>üìä Data is object with ${embeddedData.products.length} products</p>`;
                                if (embeddedData.salesmen) {
                                    output += `<p>üë• Found ${embeddedData.salesmen.length} salesmen</p>`;
                                }
                            } else {
                                output += '<p>‚ùå Invalid data format</p>';
                            }
                            
                            // Show first product as sample
                            const products = Array.isArray(embeddedData) ? embeddedData : embeddedData.products;
                            if (products && products.length > 0) {
                                output += '<h3>Sample Product:</h3>';
                                output += `<pre>${JSON.stringify(products[0], null, 2)}</pre>`;
                            }
                            
                        } catch (parseError) {
                            output += `<p>‚ùå JSON parsing failed: ${parseError.message}</p>`;
                        }
                    } else {
                        output += '<p>‚ùå Element has no content</p>';
                    }
                } else {
                    output += '<p>‚ùå EMBEDDED_DATA element not found</p>';
                }
                
            } catch (error) {
                output += `<p>‚ùå Test failed: ${error.message}</p>`;
            }
            
            results.innerHTML = output;
        }
        
        // Run test when page loads
        document.addEventListener('DOMContentLoaded', testDataLoading);
    </script>
    
    <!-- Include the same embedded data as the main app -->
    <script type="application/json" id="EMBEDDED_DATA">{
  "products": [
    {
      "Length": 4,
      "Price List Name": "INDIA25",
      "Currency": "INR",
      "Category": "DIY",
      "Density": "Double Drawn",
      "Product": "Bun20",
      "Colors": "All Colors",
      "Standard Weight": 20,
      "Rate": 300,
      "Can Be Sold in KG?": "n"
    }
  ],
  "salesmen": ["Praveen", "Rupa", "INH", "HW", "Vijay", "Pankaj", "Sunil"],
  "headers": ["Length", "Price List Name", "Currency", "Category", "Density", "Product", "Colors", "Standard Weight", "Rate", "Can Be Sold in KG?"],
  "lastUpdated": "2025-01-15T10:30:00.000Z",
  "source": "productData.xlsx",
  "totalProducts": 1
}</script>
</body>
</html>